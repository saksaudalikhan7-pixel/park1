(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4550],{79917:function(e,s,t){Promise.resolve().then(t.bind(t,50061))},50061:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return P}});var l=t(20984),a=t(30208),n=t(68887),r=t(84805),i=t(74133),o=t(47313),c=t(45049),d=t(40218),x=t(89765),m=t(50907),h=t(77046),p=t(40488),u=t(43829),b=t(82547),g=t(62162),j=t(69388);t(35994);let N=e=>{let{event:s}=e,t="session"===s.type;return(0,l.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,l.jsx)("span",{children:t?"\uD83C\uDFAF":"\uD83C\uDF89"}),(0,l.jsx)("span",{className:"font-semibold truncate",children:s.title})]})};var f=t(45747),v=t(58518),y=t(4343),w=t(69726),k=t(41262),C=t(59829),z=t(979),D=t(81701),S=t(33186),Z=t(46786);let B=e=>{let{event:s,onClose:t,onRefresh:a}=e,n="session"===s.type;return(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,l.jsx)("div",{className:"p-6 ".concat(n?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-purple-500 to-purple-600"," text-white rounded-t-2xl"),children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("span",{className:"text-2xl",children:n?"\uD83C\uDFAF":"\uD83C\uDF89"}),(0,l.jsx)("h2",{className:"text-2xl font-bold",children:s.title})]}),(0,l.jsx)("p",{className:"text-white/90",children:n?"Session Booking":"Party Booking"})]}),(0,l.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:(0,l.jsx)(f.Z,{size:24})})]})}),(0,l.jsxs)("div",{className:"p-6 space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[s.arrived?(0,l.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 text-green-800 rounded-lg border-2 border-green-300",children:[(0,l.jsx)(v.Z,{size:18}),(0,l.jsx)("span",{className:"font-bold",children:"Arrived"})]}):(0,l.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-orange-100 text-orange-800 rounded-lg border-2 border-orange-300",children:[(0,l.jsx)(y.Z,{size:18}),(0,l.jsx)("span",{className:"font-bold",children:"Not Arrived"})]}),(0,l.jsx)("div",{className:"px-4 py-2 rounded-lg font-bold ".concat("confirmed"===s.status?"bg-blue-100 text-blue-800":"pending"===s.status?"bg-yellow-100 text-yellow-800":"bg-slate-100 text-slate-800"),children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),(0,l.jsxs)("div",{className:"bg-slate-50 p-4 rounded-xl",children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-3 text-slate-900",children:"Customer Information"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(w.Z,{size:18,className:"text-slate-500"}),(0,l.jsx)("span",{className:"font-semibold text-slate-900",children:s.customerName})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(k.Z,{size:18,className:"text-slate-500"}),(0,l.jsx)("span",{className:"text-slate-700",children:s.customerEmail})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(C.Z,{size:18,className:"text-slate-500"}),(0,l.jsx)("span",{className:"text-slate-700",children:s.customerPhone})]})]})]}),(0,l.jsxs)("div",{className:"bg-slate-50 p-4 rounded-xl",children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-3 text-slate-900",children:"Booking Details"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(p.Z,{size:18,className:"text-slate-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Date"}),(0,l.jsx)("p",{className:"font-semibold text-slate-900",children:(0,r.WU)(s.start,"MMM dd, yyyy")})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(z.Z,{size:18,className:"text-slate-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Time"}),(0,l.jsxs)("p",{className:"font-semibold text-slate-900",children:[(0,r.WU)(s.start,"hh:mm a")," - ",(0,r.WU)(s.end,"hh:mm a")]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(D.Z,{size:18,className:"text-slate-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Participants"}),(0,l.jsxs)("p",{className:"font-semibold text-slate-900",children:[s.participants," (",s.adults," Adults, ",s.kids," Kids)"]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(S.Z,{size:18,className:"text-slate-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Amount"}),(0,l.jsxs)("p",{className:"font-semibold text-slate-900",children:["₹",s.amount.toLocaleString()]})]})]})]}),(0,l.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-200",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(Z.Z,{size:18,className:"text-slate-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Package"}),(0,l.jsx)("p",{className:"font-semibold text-slate-900",children:s.packageName})]})]})}),!n&&s.birthdayChildName&&(0,l.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-200",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF82"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Birthday Child"}),(0,l.jsxs)("p",{className:"font-semibold text-slate-900",children:[s.birthdayChildName," (",s.birthdayChildAge," years old)"]})]})]})})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{onClick:()=>{let e=n?"/admin/bookings/".concat(s.bookingId):"/admin/party-bookings/".concat(s.bookingId);window.location.href=e},className:"flex-1 py-3 px-4 rounded-xl font-bold text-white transition-colors ".concat(n?"bg-blue-600 hover:bg-blue-700":"bg-purple-600 hover:bg-purple-700"),children:"View Full Details"}),(0,l.jsx)("button",{onClick:t,className:"px-6 py-3 bg-slate-200 text-slate-700 rounded-xl font-bold hover:bg-slate-300 transition-colors",children:"Close"})]})]})]})})},M={"en-US":t(88483)},A=(0,n.lD)({format:r.WU,parse:i.Qc,startOfWeek:o.z,getDay:c.w,locales:M});function P(){let[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)(!0),[o,c]=(0,a.useState)(new Date),[f,v]=(0,a.useState)("month"),[y,w]=(0,a.useState)(null),[k,C]=(0,a.useState)(!1),[z,D]=(0,a.useState)("all"),[S,Z]=(0,a.useState)(""),[M,P]=(0,a.useState)({totalBookings:0,sessionBookings:0,partyBookings:0,totalRevenue:0,totalParticipants:0}),F=(0,a.useCallback)(async e=>{i(!0);try{let t=(0,r.WU)((0,d.N)(e),"yyyy-MM-dd"),l=(0,r.WU)((0,x.V)(e),"yyyy-MM-dd"),a=await fetch("".concat("http://localhost:8000/api/v1","/bookings/calendar/?start_date=").concat(t,"&end_date=").concat(l),{credentials:"include"});if(!a.ok)throw Error("Failed to fetch bookings");let n=await a.json(),i=n.events.map(e=>({...e,start:new Date(e.start),end:new Date(e.end)}));s(i),P(n.summary)}catch(e){console.error("Failed to load calendar bookings:",e)}finally{i(!1)}},[]);(0,a.useEffect)(()=>{F(o)},[o,F]);let W=(0,a.useMemo)(()=>{let s=e;if("all"!==z&&(s=s.filter(e=>e.type===z)),S){let e=S.toLowerCase();s=s.filter(s=>s.customerName.toLowerCase().includes(e)||s.customerEmail.toLowerCase().includes(e)||s.title.toLowerCase().includes(e))}return s},[e,z,S]),U=e=>{c(e)},E=e=>{v(e)};return(0,l.jsxs)("div",{className:"min-h-screen bg-slate-50 p-6",children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[(0,l.jsx)(p.Z,{size:32,className:"text-blue-600"}),"Booking Calendar"]}),(0,l.jsx)("p",{className:"text-slate-600 mt-1",children:"View and manage all session and party bookings"})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[(0,l.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200",children:[(0,l.jsx)("p",{className:"text-sm text-slate-600",children:"Total Bookings"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:M.totalBookings})]}),(0,l.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl shadow-sm border border-blue-200",children:[(0,l.jsx)("p",{className:"text-sm text-blue-700",children:"Session Bookings"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:M.sessionBookings})]}),(0,l.jsxs)("div",{className:"bg-purple-50 p-4 rounded-xl shadow-sm border border-purple-200",children:[(0,l.jsx)("p",{className:"text-sm text-purple-700",children:"Party Bookings"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:M.partyBookings})]}),(0,l.jsxs)("div",{className:"bg-green-50 p-4 rounded-xl shadow-sm border border-green-200",children:[(0,l.jsx)("p",{className:"text-sm text-green-700",children:"Total Revenue"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-green-900",children:["₹",M.totalRevenue.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"bg-orange-50 p-4 rounded-xl shadow-sm border border-orange-200",children:[(0,l.jsx)("p",{className:"text-sm text-orange-700",children:"Total Participants"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-orange-900",children:M.totalParticipants})]})]}),(0,l.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-wrap items-center gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>U((0,m.W)(o,1)),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:(0,l.jsx)(u.Z,{size:20})}),(0,l.jsx)("span",{className:"font-bold text-lg min-w-[200px] text-center",children:(0,r.WU)(o,"MMMM yyyy")}),(0,l.jsx)("button",{onClick:()=>U((0,h.z)(o,1)),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:(0,l.jsx)(b.Z,{size:20})}),(0,l.jsx)("button",{onClick:()=>U(new Date),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors ml-2",children:"Today"})]}),(0,l.jsxs)("div",{className:"flex gap-2 ml-auto",children:[(0,l.jsx)("button",{onClick:()=>E("month"),className:"px-4 py-2 rounded-lg transition-colors ".concat("month"===f?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:"Month"}),(0,l.jsx)("button",{onClick:()=>E("week"),className:"px-4 py-2 rounded-lg transition-colors ".concat("week"===f?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:"Week"}),(0,l.jsx)("button",{onClick:()=>E("day"),className:"px-4 py-2 rounded-lg transition-colors ".concat("day"===f?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:"Day"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(g.Z,{size:18,className:"text-slate-500"}),(0,l.jsxs)("select",{value:z,onChange:e=>D(e.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"all",children:"All Bookings"}),(0,l.jsx)("option",{value:"session",children:"Session Only"}),(0,l.jsx)("option",{value:"party",children:"Party Only"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 bg-slate-100 px-3 py-2 rounded-lg",children:[(0,l.jsx)(j.Z,{size:18,className:"text-slate-500"}),(0,l.jsx)("input",{type:"text",placeholder:"Search customer...",value:S,onChange:e=>Z(e.target.value),className:"bg-transparent border-none outline-none text-sm w-48"})]})]})]}),(0,l.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",style:{height:"700px"},children:t?(0,l.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-slate-600",children:"Loading bookings..."})]})}):(0,l.jsx)(n.f,{localizer:A,events:W,startAccessor:"start",endAccessor:"end",style:{height:"100%"},view:f,onView:E,date:o,onNavigate:U,onSelectEvent:e=>{w(e),C(!0)},eventPropGetter:e=>({style:{backgroundColor:"session"===e.type?"#3b82f6":"#a855f7",borderRadius:"6px",opacity:.9,color:"white",border:"none",display:"block",fontSize:"0.875rem",padding:"2px 6px"}}),components:{event:N},popup:!0})}),k&&y&&(0,l.jsx)(B,{event:y,onClose:()=>{C(!1),w(null)},onRefresh:()=>F(o)})]})}}},function(e){e.O(0,[3664,2671,399,7115,9069,1744],function(){return e(e.s=79917)}),_N_E=e.O()}]);