(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7614],{13815:function(e,t,r){Promise.resolve().then(r.bind(r,89795))},89795:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var s=r(20984),a=r(30208),n=r(44388),i=r(46665),l=r(66176),c=r(94601),o=r(59074),u=r(72690);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,u.Z)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var m=r(33186);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,u.Z)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var f=r(40488),p=r(81558),b=r(23913),h=r(40346);function y(){let e=(0,i.useRouter)(),t=(0,i.useParams)(),[r,u]=(0,a.useState)(!1),[y,g]=(0,a.useState)(null);async function v(){try{let e=await (0,n.bi)(t.id);g(e)}catch(t){l.toast.error("Failed to load voucher"),e.push("/admin/vouchers")}}async function j(r){u(!0);try{let s={code:r.get("code"),discountType:r.get("discountType"),discountValue:Number(r.get("discountValue")),minOrderAmount:Number(r.get("minOrderAmount"))||void 0,usageLimit:Number(r.get("usageLimit"))||void 0,description:r.get("description")||void 0,isActive:"true"===r.get("isActive")},a=r.get("expiryDate");a&&(s.expiryDate=new Date(a)),await (0,n.wX)(t.id,s),l.toast.success("Voucher updated successfully"),e.push("/admin/vouchers")}catch(e){l.toast.error(e.message||"Failed to update voucher")}finally{u(!1)}}return((0,a.useEffect)(()=>{v()},[]),y)?(0,s.jsxs)("div",{className:"p-8 max-w-2xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)(h.default,{href:"/admin/vouchers",className:"text-slate-500 hover:text-slate-700 flex items-center gap-2 mb-4 transition-colors",children:[(0,s.jsx)(c.Z,{size:16}),"Back to Vouchers"]}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Edit Voucher"}),(0,s.jsx)("p",{className:"text-slate-500 mt-1",children:"Update voucher details and settings"})]}),(0,s.jsxs)("form",{action:j,className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:[(0,s.jsx)(o.Z,{size:16,className:"inline mr-1"}),"Voucher Code"]}),(0,s.jsx)("input",{name:"code",type:"text",required:!0,defaultValue:y.code,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none uppercase text-slate-900",placeholder:"DISCOUNT20"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Discount Type"}),(0,s.jsxs)("select",{name:"discountType",required:!0,defaultValue:y.discountType,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none text-slate-900",children:[(0,s.jsx)("option",{value:"PERCENTAGE",children:"Percentage (%)"}),(0,s.jsx)("option",{value:"FLAT",children:"Flat Amount (₹)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["PERCENTAGE"===y.discountType?(0,s.jsx)(d,{size:16,className:"inline mr-1"}):(0,s.jsx)(m.Z,{size:16,className:"inline mr-1"}),"Discount Value"]}),(0,s.jsx)("input",{name:"discountValue",type:"number",required:!0,min:"0",step:"0.01",defaultValue:y.discountValue,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none text-slate-900"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:[(0,s.jsx)(m.Z,{size:16,className:"inline mr-1"}),"Min Order Amount (₹)"]}),(0,s.jsx)("input",{name:"minOrderAmount",type:"number",min:"0",defaultValue:y.minOrderAmount||"",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none text-slate-900",placeholder:"Optional"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:[(0,s.jsx)(x,{size:16,className:"inline mr-1"}),"Usage Limit"]}),(0,s.jsx)("input",{name:"usageLimit",type:"number",min:"0",defaultValue:y.usageLimit||"",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none text-slate-900",placeholder:"Unlimited"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:[(0,s.jsx)(f.Z,{size:16,className:"inline mr-1"}),"Expiry Date"]}),(0,s.jsx)("input",{name:"expiryDate",type:"date",defaultValue:y.expiryDate?new Date(y.expiryDate).toISOString().split("T")[0]:"",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none text-slate-900"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{name:"description",rows:3,defaultValue:y.description||"",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none text-slate-900",placeholder:"Internal notes about this voucher"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{type:"checkbox",name:"isActive",value:"true",defaultChecked:y.isActive,className:"w-4 h-4 text-primary border-slate-300 rounded focus:ring-primary"}),(0,s.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Active (voucher can be used)"})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-slate-100 flex justify-end gap-3",children:[(0,s.jsx)(h.default,{href:"/admin/vouchers",className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg font-medium hover:bg-slate-50 transition-colors",children:"Cancel"}),(0,s.jsxs)("button",{type:"submit",disabled:r,className:"bg-primary hover:bg-primary-dark text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors disabled:opacity-50",children:[r?(0,s.jsx)(p.Z,{className:"animate-spin",size:20}):(0,s.jsx)(b.Z,{size:20}),"Update Voucher"]})]})]})]}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}},44388:function(e,t,r){"use strict";r.d(t,{$:function(){return n},bi:function(){return a},wX:function(){return i}}),r(54465);var s=r(77537);(0,s.$)("0c6fd7ffa5e3373ae635b7bbb7b6ee5e9c368a45"),(0,s.$)("be87ceb07b37eba04f640959c66394d3b1c33a97");var a=(0,s.$)("cbd5730f9445ba143f38b805771ea47eed07ca78"),n=(0,s.$)("0da97f09e17dcb46ce381d6e4f574e98aa254844"),i=(0,s.$)("d52fa399c148633727016296bd5d3ff9a7c5064e");(0,s.$)("fccae89bb25ba8ec52368e8fd69e24c47d3a70ae")},72690:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var s=r(30208),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,s.forwardRef)((r,i)=>{let{color:l="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:u,className:d="",children:m,...x}=r;return(0,s.createElement)("svg",{ref:i,...a,width:c,height:c,stroke:l,strokeWidth:u?24*Number(o)/Number(c):o,className:["lucide","lucide-".concat(n(e)),d].join(" "),...x},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},94601:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(72690).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},40488:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(72690).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},33186:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(72690).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},81558:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(72690).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},23913:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(72690).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},59074:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(72690).Z)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},40346:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var s=r(31844),a=r.n(s)},46665:function(e,t,r){"use strict";var s=r(70319);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},77537:function(e,t,r){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return a}});let s=r(54465);function a(e){let{createServerReference:t}=r(92981);return t(e,s.callServer)}}},function(e){e.O(0,[6176,1844,7115,9069,1744],function(){return e(e.s=13815)}),_N_E=e.O()}]);