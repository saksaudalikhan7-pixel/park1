(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[471],{41027:function(e,t,s){Promise.resolve().then(s.bind(s,14308))},14308:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var r=s(20984),a=s(30208),n=s(92583),l=s(57229),o=s(36743),i=s(31959),c=s(4343),d=s(25115),x=s(36997);let m={info:{icon:i.Z,bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-600",textColor:"text-blue-900"},warning:{icon:c.Z,bgColor:"bg-amber-50",borderColor:"border-amber-200",iconColor:"text-amber-600",textColor:"text-amber-900"},danger:{icon:d.Z,bgColor:"bg-red-50",borderColor:"border-red-200",iconColor:"text-red-600",textColor:"text-red-900"},success:{icon:x.Z,bgColor:"bg-emerald-50",borderColor:"border-emerald-200",iconColor:"text-emerald-600",textColor:"text-emerald-900"}};function h(e){let{severity:t="warning",children:s,className:a=""}=e,n=m[t],l=n.icon;return(0,r.jsxs)("div",{className:"\n                ".concat(n.bgColor," \n                border-2 ").concat(n.borderColor," \n                rounded-xl p-5 \n                flex items-start gap-4\n                shadow-sm\n                ").concat(a,"\n            "),children:[(0,r.jsx)(l,{className:"w-6 h-6 ".concat(n.iconColor," flex-shrink-0 mt-0.5")}),(0,r.jsx)("div",{className:"flex-1 ".concat(n.textColor),children:s})]})}h.Title=function(e){let{children:t}=e;return(0,r.jsx)("p",{className:"font-bold text-base mb-1",children:t})},h.Description=function(e){let{children:t}=e;return(0,r.jsx)("p",{className:"text-sm leading-relaxed",children:t})};var u=s(37038),b=s(40488),f=s(94601),p=s(40189),g=s(66176),j=s(40346);function y(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[c,d]=(0,a.useState)(!1),[x,m]=(0,a.useState)(null),[y,N]=(0,a.useState)(!1),[v,w]=(0,a.useState)(100);async function k(){try{let e=await (0,n.kt)();t(e)}catch(e){console.error("Error loading history:",e),g.toast.error("Failed to load booking history")}finally{i(!1)}}async function C(){if(x){d(!0);try{let e=await (0,n.yl)(x.id);e.success?(g.toast.success(e.message||"Booking #".concat(e.bookingId," restored successfully!")),N(!1),m(null),await k()):g.toast.error(e.error||"Failed to restore booking")}catch(e){console.error("Restore error:",e),g.toast.error(e.message||"An error occurred while restoring")}finally{d(!1)}}}return(0,a.useEffect)(()=>{k()},[]),s?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,r.jsxs)("div",{className:"p-8 space-y-6",children:[(0,r.jsx)(o.m,{title:"Session Booking History",description:"Restore session bookings that were paid but not saved",icon:(0,r.jsx)(b.Z,{className:"w-8 h-8"}),breadcrumbs:[{label:"Dashboard",href:"/admin"},{label:"Session Bookings",href:"/admin/bookings"},{label:"History"}],actions:(0,r.jsx)(j.default,{href:"/admin/bookings",children:(0,r.jsx)(u.z,{variant:"secondary",icon:(0,r.jsx)(f.Z,{size:16}),children:"Back to Bookings"})})}),(0,r.jsxs)(h,{severity:"danger",children:[(0,r.jsx)(h.Title,{children:"Irreversible Action - Use With Caution"}),(0,r.jsxs)(h.Description,{children:["Restoring a booking will ",(0,r.jsx)("strong",{children:"permanently move it to Session Bookings"}),". This action cannot be undone and may affect your reporting and records. Only restore bookings if you are certain they need to be recovered."]})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Show:"}),(0,r.jsxs)("select",{value:v,onChange:e=>w(Number(e.target.value)),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none bg-white",children:[(0,r.jsx)("option",{value:10,children:"10"}),(0,r.jsx)("option",{value:25,children:"25"}),(0,r.jsx)("option",{value:50,children:"50"}),(0,r.jsx)("option",{value:100,children:"100"})]})]})}),(0,r.jsxs)("p",{className:"text-sm text-slate-600",children:["Showing ",(0,r.jsx)("span",{className:"font-semibold text-slate-900",children:Math.min(v,e.length)})," of ",(0,r.jsx)("span",{className:"font-semibold text-slate-900",children:e.length})," records"]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-slate-100 border-b-2 border-slate-200",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Booking ID"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Customer Name"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Email"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Date & Time"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Amount"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Action"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-slate-100",children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"px-6 py-16 text-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,r.jsx)(b.Z,{className:"w-12 h-12 text-slate-300"}),(0,r.jsx)("p",{className:"text-base font-medium text-slate-900",children:"No booking history found"}),(0,r.jsx)("p",{className:"text-sm text-slate-500",children:"Restored bookings will be removed from this list"})]})})}):e.slice(0,v).map(e=>(0,r.jsxs)("tr",{className:"hover:bg-amber-50/30 transition-all duration-200 border-b border-slate-100 last:border-b-0",children:[(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:["#",e.id]})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:"text-sm font-medium text-slate-900",children:e.name})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:"text-sm text-slate-600",children:e.email})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"text-sm text-slate-900",children:[(0,r.jsx)("div",{className:"font-medium",children:new Date(e.date).toLocaleDateString()}),(0,r.jsx)("div",{className:"text-xs text-slate-500 mt-0.5",children:e.time})]})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:["â‚¹",parseFloat(e.amount).toFixed(2)]})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)(u.z,{variant:"warning",size:"sm",onClick:()=>{m(e),N(!0)},disabled:!e.canRestore,icon:(0,r.jsx)(p.Z,{className:"w-4 h-4"}),children:"Restore"})})]},e.id))})]})})}),x&&(0,r.jsx)(l.N,{isOpen:y,onClose:()=>{N(!1),m(null)},onConfirm:C,bookingData:{id:x.id,name:x.name,email:x.email,date:new Date(x.date).toLocaleDateString(),time:x.time,amount:parseFloat(x.amount),type:"session"},loading:c})]})}},37038:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var r=s(20984);s(30208);var a=s(81558);let n={primary:"bg-blue-600 text-white hover:bg-blue-700 shadow-sm hover:shadow-md border border-blue-600",secondary:"bg-white text-slate-700 hover:bg-slate-50 border border-slate-300 shadow-sm",destructive:"bg-red-600 text-white hover:bg-red-700 shadow-sm hover:shadow-md border border-red-600",warning:"bg-amber-600 text-white hover:bg-amber-700 shadow-sm hover:shadow-md border border-amber-600",ghost:"bg-transparent text-slate-600 hover:bg-slate-100 hover:text-slate-900"},l={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base"};function o(e){let{variant:t="primary",size:s="md",loading:o=!1,icon:i,children:c,disabled:d,className:x="",...m}=e;return(0,r.jsxs)("button",{className:"\n                inline-flex items-center justify-center gap-2 \n                font-medium rounded-lg\n                transition-all duration-200\n                focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\n                disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none\n                ".concat(n[t],"\n                ").concat(l[s],"\n                ").concat(x,"\n            "),disabled:d||o,...m,children:[o?(0,r.jsx)(a.Z,{className:"w-4 h-4 animate-spin"}):i?(0,r.jsx)("span",{className:"shrink-0",children:i}):null,c]})}},36743:function(e,t,s){"use strict";s.d(t,{m:function(){return o}});var r=s(20984),a=s(30208),n=s(40346),l=s(82547);function o(e){let{title:t,description:s,breadcrumbs:o,actions:i,icon:c}=e;return(0,r.jsx)("div",{className:"bg-white border-b border-slate-200 -mx-8 -mt-8 px-8 py-6 mb-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[o&&o.length>0&&(0,r.jsx)("nav",{className:"flex items-center gap-2 text-sm text-slate-500 mb-3",children:o.map((e,t)=>(0,r.jsxs)(a.Fragment,{children:[e.href?(0,r.jsx)(n.default,{href:e.href,className:"hover:text-blue-600 transition-colors",children:e.label}):(0,r.jsx)("span",{className:"text-slate-700 font-medium",children:e.label}),t<o.length-1&&(0,r.jsx)(l.Z,{size:14,className:"text-slate-400"})]},t))}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[c&&(0,r.jsx)("div",{className:"text-blue-600",children:c}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:t}),s&&(0,r.jsx)("p",{className:"text-base text-slate-600 mt-1",children:s})]})]})]}),i&&(0,r.jsx)("div",{className:"flex items-center gap-3",children:i})]})})}},4343:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(72690).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},82547:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(72690).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},31959:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(72690).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},81558:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(72690).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},36997:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(72690).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}},function(e){e.O(0,[6176,1844,1715,7115,9069,1744],function(){return e(e.s=41027)}),_N_E=e.O()}]);