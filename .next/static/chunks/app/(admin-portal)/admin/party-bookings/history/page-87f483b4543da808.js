(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8718],{70006:function(e,t,s){Promise.resolve().then(s.bind(s,22583))},22583:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(20984),r=s(30208),l=s(92583),i=s(57229),n=s(94601),o=s(40488),c=s(25115),d=s(40189),x=s(66176),m=s(40346);function h(){let[e,t]=(0,r.useState)([]),[s,h]=(0,r.useState)(!0),[p,u]=(0,r.useState)(!1),[f,g]=(0,r.useState)(null),[j,b]=(0,r.useState)(!1),[y,N]=(0,r.useState)(100);async function k(){try{let e=await (0,l.cz)();t(e)}catch(e){console.error("Error loading history:",e),x.toast.error("Failed to load booking history")}finally{h(!1)}}async function v(){if(f){u(!0);try{let e=await (0,l.Ts)(f.id);e.success?(x.toast.success(e.message||"Party Booking #".concat(e.bookingId," restored successfully!")),b(!1),g(null),await k()):x.toast.error(e.error||"Failed to restore party booking")}catch(e){console.error("Restore error:",e),x.toast.error(e.message||"An error occurred while restoring")}finally{u(!1)}}}return(0,r.useEffect)(()=>{k()},[]),s?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,a.jsxs)("div",{className:"p-8 space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)(m.default,{href:"/admin/party-bookings",className:"text-slate-500 hover:text-slate-700 flex items-center gap-2 mb-2 transition-colors text-sm",children:[(0,a.jsx)(n.Z,{size:16}),"Back to Party Bookings"]}),(0,a.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[(0,a.jsx)(o.Z,{className:"w-8 h-8 text-primary"}),"Party Booking History"]}),(0,a.jsx)("p",{className:"text-slate-600 mt-1",children:"Move Party Bookings That Were Paid But Not Saved"})]})}),(0,a.jsxs)("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 flex items-start gap-3",children:[(0,a.jsx)(c.Z,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-red-800 font-bold text-base",children:"Warning! Restoring These Bookings From History Will Move The Data To The Party Booking Page."}),(0,a.jsx)("p",{className:"text-red-700 text-sm mt-1",children:"Be Super Careful When You Use This Facility!"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-slate-700 mb-3",children:"Filter Data:"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-sm text-slate-600",children:"Display"}),(0,a.jsxs)("select",{value:y,onChange:e=>N(Number(e.target.value)),className:"px-3 py-1.5 border border-slate-300 rounded text-sm focus:ring-2 focus:ring-primary focus:border-transparent outline-none",children:[(0,a.jsx)("option",{value:10,children:"10"}),(0,a.jsx)("option",{value:25,children:"25"}),(0,a.jsx)("option",{value:50,children:"50"}),(0,a.jsx)("option",{value:100,children:"100"})]})]}),(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:["Displaying ",Math.min(y,e.length)," out of ",e.length]}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Page 1 / 1"})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-slate-50 border-b border-slate-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Party Booking ID #"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Customer Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Date & Time"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Package"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Amount Checked Out"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Manage"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-12 text-center text-slate-500",children:"No party booking history found"})}):e.slice(0,y).map(e=>(0,a.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-slate-900",children:e.id}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-slate-900",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-slate-600",children:e.email}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-slate-900",children:[new Date(e.date).toLocaleDateString()," at ",e.time]}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-slate-600",children:e.packageName||"Standard"}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm font-bold text-slate-900",children:["â‚¹",parseFloat(e.amount).toFixed(2)]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("button",{onClick:()=>{g(e),b(!0)},disabled:!e.canRestore,className:"px-4 py-2 bg-primary text-white text-sm font-medium rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Restore?"]})})]},e.id))})]})})}),f&&(0,a.jsx)(i.N,{isOpen:j,onClose:()=>{b(!1),g(null)},onConfirm:v,bookingData:{id:f.id,name:f.name,email:f.email,date:new Date(f.date).toLocaleDateString(),time:f.time,amount:parseFloat(f.amount),type:"party"},loading:p})]})}}},function(e){e.O(0,[6176,1844,1715,7115,9069,1744],function(){return e(e.s=70006)}),_N_E=e.O()}]);