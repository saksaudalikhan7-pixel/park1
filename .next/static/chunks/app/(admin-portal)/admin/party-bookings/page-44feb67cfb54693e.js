(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9917],{97722:function(e,t,s){Promise.resolve().then(s.bind(s,44880))},44880:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var a=s(20984),l=s(30208),r=s(92583),i=s(79574),n=s(27853),d=s(38276),o=s(79285),c=s(38074),x=s(36743),u=s(37038),p=s(74269),m=s(66176),h=s(90615),g=s(40189),b=s(74935);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,s(72690).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);var j=s(96187),v=s(14252),N=s(26427),y=s(40346),k=s(46665);function w(){let[e,t]=(0,l.useState)([]),[w,D]=(0,l.useState)([]),[E,P]=(0,l.useState)(!0),[z,A]=(0,l.useState)(""),[M,Z]=(0,l.useState)("all"),[_,L]=(0,l.useState)("all"),[I,T]=(0,l.useState)("all"),[F,B]=(0,l.useState)(25),O=(0,k.useRouter)();async function R(){try{P(!0);let{fetchBookingsClient:e}=await s.e(9560).then(s.bind(s,49560)),a=await e("PARTY");a&&a.length,t(a),D(a)}catch(e){console.error(e),m.toast.error("Failed to load bookings: "+e.message)}finally{P(!1)}}return((0,l.useEffect)(()=>{R()},[]),(0,l.useEffect)(()=>{(function(){let t=[...e];if(z){let e=z.toLowerCase();t=t.filter(t=>{var s,a,l,r,i;return(null===(s=t.customerName)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(a=t.customerEmail)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(l=t.name)||void 0===l?void 0:l.toLowerCase().includes(e))||(null===(r=t.email)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(i=t.id)||void 0===i?void 0:i.toString().includes(e))})}if("all"!==M&&(t=t.filter(e=>(e.bookingStatus||e.status)===M.toUpperCase())),t=(0,d.Q)(t,_),"all"!==I){let e="yes"===I;t=t.filter(t=>t.arrived===e)}t.sort((e,t)=>{let s=new Date(e.createdAt||e.created_at||0).getTime();return new Date(t.createdAt||t.created_at||0).getTime()-s}),D(t)})()},[z,M,_,I,e]),E)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,a.jsxs)("div",{className:"p-8 space-y-6",children:[(0,a.jsx)(x.m,{title:"Party Bookings",description:"View and manage all party bookings",breadcrumbs:[{label:"Dashboard",href:"/admin"},{label:"Party Bookings"}],actions:(0,a.jsx)(u.z,{variant:"primary",icon:(0,a.jsx)(h.Z,{size:16}),onClick:()=>O.push("/admin/party-bookings/new"),children:"Create New Booking"})}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Date"}),(0,a.jsx)(d.f,{value:_,onChange:L})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Status"}),(0,a.jsxs)("select",{value:M,onChange:e=>Z(e.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-300 bg-white text-slate-900 text-sm outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Statuses"}),(0,a.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,a.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Arrival Status"}),(0,a.jsxs)("select",{value:I,onChange:e=>T(e.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-300 bg-white text-slate-900 text-sm outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All"}),(0,a.jsx)("option",{value:"yes",children:"Arrived"}),(0,a.jsx)("option",{value:"no",children:"Not Arrived"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Show"}),(0,a.jsxs)("select",{value:F,onChange:e=>B(Number(e.target.value)),className:"w-full px-3 py-2 rounded-lg border border-slate-300 bg-white text-slate-900 text-sm outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:25,children:"25 per page"}),(0,a.jsx)("option",{value:50,children:"50 per page"}),(0,a.jsx)("option",{value:100,children:"100 per page"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200",children:[(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:["Showing ",(0,a.jsx)("span",{className:"font-semibold text-slate-900",children:Math.min(w.length,F)})," of ",(0,a.jsx)("span",{className:"font-semibold text-slate-900",children:w.length})," bookings"]}),(0,a.jsx)(u.z,{variant:"secondary",size:"sm",onClick:function(){A(""),Z("all"),L("all"),T("all")},icon:(0,a.jsx)(g.Z,{size:14}),children:"Reset Filters"})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{className:"bg-slate-100 border-b-2 border-slate-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Booking #"}),(0,a.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Time"}),(0,a.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Package"}),(0,a.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Amount"}),(0,a.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Arrival"}),(0,a.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Waiver"}),(0,a.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:0===w.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:10,className:"px-6 py-16",children:(0,a.jsx)(p.u,{icon:(0,a.jsx)(b.Z,{size:48}),title:"No party bookings found",description:"Try adjusting your filters or create a new party booking",action:(0,a.jsx)(u.z,{variant:"primary",icon:(0,a.jsx)(h.Z,{size:16}),onClick:()=>O.push("/admin/party-bookings/new"),children:"Create First Party Booking"})})})}):w.slice(0,F).map(e=>(0,a.jsxs)("tr",{className:"hover:bg-purple-50/30 transition-all duration-200",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:["#",e.id]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-slate-900",children:e.customerName||e.name}),(0,a.jsx)("span",{className:"text-xs text-slate-500",children:e.customerEmail||e.email}),(0,a.jsx)("span",{className:"text-xs text-slate-500",children:e.customerPhone||e.phone})]})}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-slate-900",children:(0,i.p6)(e.date)}),(0,a.jsx)("div",{className:"text-xs text-slate-500 mt-0.5",children:new Date(e.date).getFullYear()})]}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-slate-900",children:function(e){if(!e)return"";let[t,s]=e.split(":").map(Number),a=new Date;a.setHours(t,s,0);let l=new Date(a.getTime()+72e5);return"".concat(S(a)," - ").concat(S(l))}(e.time)}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f,{size:14,className:"text-purple-400"}),(0,a.jsx)("span",{className:"text-sm text-slate-900",children:e.packageName||e.package_name||"Standard Party"})]}),(0,a.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[(e.kids||0)+(e.adults||0)," Guests"]})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"text-sm font-bold text-slate-900",children:(0,n.x)(e.amount||0)})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)(C,{status:e.bookingStatus||e.status})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)(o.P,{bookingId:e.id,arrived:e.arrived,onToggle:async(e,s)=>{if(t(t=>t.map(t=>String(t.id)===String(e)?{...t,arrived:s,arrived_at:s?new Date().toISOString():null}:t)),(await (0,r.fm)(e.toString(),"party",s)).success)m.toast.success(s?"Marked as arrived":"Marked as not arrived");else throw t(t=>t.map(t=>String(t.id)===String(e)?{...t,arrived:!s,arrived_at:s?null:new Date().toISOString()}:t)),m.toast.error("Failed to update arrival status"),Error("Failed to update arrival status")},type:"party"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)(c.m,{bookingId:e.id,status:e.waiverStatus||e.waiver_status})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.default,{href:"/admin/party-bookings/".concat(e.id),className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-all",title:"View Details",children:(0,a.jsx)(j.Z,{size:18})}),(0,a.jsx)(y.default,{href:"/admin/party-bookings/".concat(e.id,"/edit"),className:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all",title:"Edit Booking",children:(0,a.jsx)(v.Z,{size:18})}),(0,a.jsx)("button",{onClick:()=>m.toast.info("Delete functionality disabled for safety"),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all",title:"Delete Booking",children:(0,a.jsx)(N.Z,{size:18})})]})})]},e.id))})]})})})]})}function C(e){let{status:t}=e;return(0,a.jsxs)("span",{className:"px-2.5 py-1 rounded-full text-xs font-bold border shadow-sm ".concat({CONFIRMED:"bg-emerald-100 text-emerald-700 border-emerald-300",PENDING:"bg-amber-100 text-amber-700 border-amber-300",CANCELLED:"bg-red-100 text-red-700 border-red-300",COMPLETED:"bg-blue-100 text-blue-700 border-blue-300"}[null==t?void 0:t.toUpperCase()]||"bg-slate-100 text-slate-700 border-slate-300"," inline-flex items-center gap-1.5"),children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full ".concat((null==t?void 0:t.toUpperCase())==="CONFIRMED"?"bg-emerald-500":(null==t?void 0:t.toUpperCase())==="PENDING"?"bg-amber-500":"bg-slate-400")}),t||"PENDING"]})}function S(e){return e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).toLowerCase()}},74935:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(72690).Z)("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]])}},function(e){e.O(0,[6176,1844,7108,7115,9069,1744],function(){return e(e.s=97722)}),_N_E=e.O()}]);