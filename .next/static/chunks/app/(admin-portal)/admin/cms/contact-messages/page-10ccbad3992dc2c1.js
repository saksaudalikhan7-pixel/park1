(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8762,1608],{98781:function(e,t,a){Promise.resolve().then(a.bind(a,64890))},64890:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(20984),l=a(81558),n=a(69388),r=a(40488),i=a(62162),c=a(36369),o=a(16701),d=a(41262),u=a(59829),m=a(96187),h=a(26427),f=a(30208),x=a(81608),y=a(40346),g=a(66176),p=a(40007);function b(){let[e,t]=(0,f.useState)([]),[a,b]=(0,f.useState)(!0),[k,v]=(0,f.useState)(null),[j,N]=(0,f.useState)(""),[w,Z]=(0,f.useState)("all"),[S,C]=(0,f.useState)("all");async function D(){try{let e=await (0,x.vz)();t(e),v(null)}catch(e){console.error("Failed to load contact messages",e),v(e.message||"Failed to load data")}finally{b(!1)}}(0,f.useEffect)(()=>{D()},[]);let L=async a=>{confirm("Are you sure you want to delete this message?")&&((await (0,x.u9)(a)).success?(g.toast.success("Message deleted"),t(e.filter(e=>e.id!==a))):g.toast.error("Failed to delete message"))},M=(0,f.useMemo)(()=>{let t=[...e];if(j){let e=j.toLowerCase();t=t.filter(t=>{var a,s,l,n;return(null===(a=t.name)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(s=t.email)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(l=t.phone)||void 0===l?void 0:l.toLowerCase().includes(e))||(null===(n=t.message)||void 0===n?void 0:n.toLowerCase().includes(e))})}if("all"!==w){let e=new Date,a=new Date(e.getFullYear(),e.getMonth(),e.getDate());t=t.filter(e=>{let t=new Date(e.created_at);switch(w){case"today":return t>=a;case"week":let s=new Date(a);return s.setDate(s.getDate()-7),t>=s;case"month":let l=new Date(a);return l.setMonth(l.getMonth()-1),t>=l;default:return!0}})}return"all"!==S&&(t=t.filter(e=>"read"===S?e.is_read:!e.is_read)),t},[e,j,w,S]);return a?(0,s.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,s.jsx)(l.Z,{className:"w-8 h-8 animate-spin text-primary"})}):k?(0,s.jsxs)("div",{className:"p-8 text-center text-red-500 bg-red-50 rounded-lg border border-red-200 m-8",children:[(0,s.jsx)("h3",{className:"font-bold",children:"Error Loading Messages"}),(0,s.jsx)("p",{children:k}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-100 hover:bg-red-200 rounded-lg transition-colors",children:"Retry"})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Contact Messages"}),(0,s.jsx)("p",{className:"text-slate-500",children:"View and manage inquiries from the contact form"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(n.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Search by name, email, phone, or message...",value:j,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.Z,{className:"w-4 h-4 text-slate-500"}),(0,s.jsxs)("select",{value:w,onChange:e=>Z(e.target.value),className:"px-3 py-1.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)("option",{value:"all",children:"All Time"}),(0,s.jsx)("option",{value:"today",children:"Today"}),(0,s.jsx)("option",{value:"week",children:"Last 7 Days"}),(0,s.jsx)("option",{value:"month",children:"Last 30 Days"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4 text-slate-500"}),(0,s.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"px-3 py-1.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)("option",{value:"all",children:"All Messages"}),(0,s.jsx)("option",{value:"unread",children:"Unread Only"}),(0,s.jsx)("option",{value:"read",children:"Read Only"})]})]}),(0,s.jsxs)("div",{className:"ml-auto text-sm text-slate-500",children:["Showing ",M.length," of ",e.length," messages"]}),(0,s.jsxs)("button",{onClick:()=>{let e=M.map(e=>({...e,is_read:e.is_read?"Read":"Unread",created_at:new Date(e.created_at).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}));(0,p.GS)(e,"contact_messages",[{key:"id",label:"Message ID"},{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"message",label:"Message"},{key:"is_read",label:"Status"},{key:"created_at",label:"Received At"}]),g.toast.success("CSV exported successfully!")},disabled:0===M.length,className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"}),"Export CSV"]})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg border border-slate-200",children:0===M.length?(0,s.jsxs)("div",{className:"p-12 text-center",children:[(0,s.jsx)(o.Z,{className:"w-16 h-16 mx-auto text-slate-300 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No messages found"}),(0,s.jsx)("p",{className:"text-slate-500",children:j||"all"!==w||"all"!==S?"Try adjusting your filters":"No contact messages yet"})]}):(0,s.jsx)("div",{className:"divide-y divide-slate-200",children:M.map(e=>(0,s.jsx)("div",{className:"p-6 hover:bg-slate-50 transition-colors ".concat(e.is_read?"":"bg-blue-50/30"),children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("h3",{className:"font-semibold text-slate-900",children:e.name}),!e.is_read&&(0,s.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:"New"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-slate-600",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4"}),(0,s.jsx)("a",{href:"mailto:".concat(e.email),className:"hover:text-primary",children:e.email})]}),e.phone&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4"}),(0,s.jsx)("a",{href:"tel:".concat(e.phone),className:"hover:text-primary",children:e.phone})]})]}),(0,s.jsx)("p",{className:"text-sm text-slate-700 line-clamp-2",children:e.message}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:new Date(e.created_at).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(y.default,{href:"/admin/cms/contact-messages/".concat(e.id),className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"View details",children:(0,s.jsx)(m.Z,{className:"w-5 h-5"})}),(0,s.jsx)("button",{onClick:()=>L(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete message",children:(0,s.jsx)(h.Z,{className:"w-5 h-5"})})]})]})},e.id))})})]})}},81608:function(e,t,a){"use strict";a.d(t,{Lx:function(){return l},RC:function(){return o},UU:function(){return i},createContactMessage:function(){return n},u9:function(){return c},vz:function(){return r}}),a(54465);var s=a(77537),l=(0,s.$)("34f5c040e9d2496c74246f746100448b1d151a55"),n=(0,s.$)("dcf5b84dccb031158efe8cb5ac7b880fdabfecf0"),r=(0,s.$)("cdfaa77035321405422d8d79889a814c8f3f6e32"),i=(0,s.$)("0f6f4bb524fa89116fba4a84edae651284c3bbc7"),c=(0,s.$)("7bf3f31e33c37909e2bde0fd64dc267f5517d403"),o=(0,s.$)("2cc8f36a9f72fb360d83df3e477a4444dc3ba74c")},40007:function(e,t,a){"use strict";function s(e,t,a){if(!e||0===e.length){alert("No data to export");return}let s=a.map(e=>e.label).join(","),l=e.map(e=>a.map(t=>{let a=e[t.key];return(t.key.includes(".")&&(a=t.key.split(".").reduce((e,t)=>null==e?void 0:e[t],e)),null==a)?"":(a instanceof Date&&(a=a.toLocaleDateString()),((a=String(a).replace(/"/g,'""')).includes(",")||a.includes("\n")||a.includes('"'))&&(a='"'.concat(a,'"')),a)}).join(",")).join("\n"),n="".concat(s,"\n").concat(l),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),c=URL.createObjectURL(r);i.setAttribute("href",c),i.setAttribute("download","".concat(t,"_").concat(new Date().toISOString().split("T")[0],".csv")),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bookings";s(e,t,[{key:"id",label:"Booking ID"},{key:"type",label:"Type"},{key:"customerName",label:"Customer Name"},{key:"customerEmail",label:"Customer Email"},{key:"customerPhone",label:"Customer Phone"},{key:"date",label:"Date"},{key:"time",label:"Time"},{key:"duration",label:"Duration (mins)"},{key:"adults",label:"Adults"},{key:"kids",label:"Kids"},{key:"spectators",label:"Spectators"},{key:"amount",label:"Amount"},{key:"bookingStatus",label:"Status"},{key:"paymentStatus",label:"Payment Status"},{key:"createdAt",label:"Created At"}])}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"customers";s(e,t,[{key:"id",label:"Customer ID"},{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"totalBookings",label:"Total Bookings"},{key:"totalSpent",label:"Total Spent"},{key:"lastBooking",label:"Last Booking"},{key:"created_at",label:"Created At"}])}a.d(t,{GS:function(){return s},Uo:function(){return l},v8:function(){return n}})},72690:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(30208),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),r=(e,t)=>{let a=(0,s.forwardRef)((a,r)=>{let{color:i="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:m,...h}=a;return(0,s.createElement)("svg",{ref:r,...l,width:c,height:c,stroke:i,strokeWidth:d?24*Number(o)/Number(c):o,className:["lucide","lucide-".concat(n(e)),u].join(" "),...h},[...t.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(m)?m:[m]])});return a.displayName="".concat(e),a}},40488:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(72690).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},36369:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(72690).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},96187:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(72690).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},62162:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(72690).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},81558:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(72690).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},41262:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(72690).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},16701:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(72690).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},59829:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(72690).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},69388:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(72690).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},26427:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(72690).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},40346:function(e,t,a){"use strict";a.d(t,{default:function(){return l.a}});var s=a(31844),l=a.n(s)},77537:function(e,t,a){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return l}});let s=a(54465);function l(e){let{createServerReference:t}=a(92981);return t(e,s.callServer)}}},function(e){e.O(0,[6176,1844,7115,9069,1744],function(){return e(e.s=98781)}),_N_E=e.O()}]);