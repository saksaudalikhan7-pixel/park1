(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8123],{8789:function(e,t,s){Promise.resolve().then(s.bind(s,30451))},30451:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var r=s(20984),a=s(30208),l=s(73837),n=s(90615),c=s(41262),d=s(979),i=s(58518),o=s(36997),x=s(59829),u=s(40488),f=s(66176),m=s(46665),h=s(26427);function p(e){let{entry:t}=e,s=(0,m.useRouter)(),[n,c]=(0,a.useState)(!1);async function d(){if(confirm("Approve this free entry request?")){c(!0);try{await (0,l.RE)(t.id,"APPROVED"),f.toast.success("Entry approved"),s.refresh()}catch(e){f.toast.error("Failed to approve entry")}finally{c(!1)}}}async function x(){let e=prompt("Reason for rejection (optional):");if(null!==e){c(!0);try{await (0,l.RE)(t.id,"REJECTED",e||void 0),f.toast.success("Entry rejected"),s.refresh()}catch(e){f.toast.error("Failed to reject entry")}finally{c(!1)}}}async function u(){if(confirm("Delete this entry permanently?")){c(!0);try{await (0,l.sJ)(t.id),f.toast.success("Entry deleted"),s.refresh()}catch(e){f.toast.error("Failed to delete entry")}finally{c(!1)}}}return(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:["PENDING"===t.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:d,disabled:n,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors disabled:opacity-50",title:"Approve",children:(0,r.jsx)(i.Z,{size:18})}),(0,r.jsx)("button",{onClick:x,disabled:n,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Reject",children:(0,r.jsx)(o.Z,{size:18})})]}),(0,r.jsx)("button",{onClick:u,disabled:n,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",title:"Delete",children:(0,r.jsx)(h.Z,{size:18})})]})}var b=s(45747);function y(e){let{onClose:t,onSuccess:s}=e,[n,c]=(0,a.useState)(!1),[d,i]=(0,a.useState)({name:"",email:"",phone:"",reason:""});async function o(e){if(e.preventDefault(),!d.name||!d.email||!d.reason){f.toast.error("Please fill in all required fields");return}c(!0);try{await (0,l.p6)(d),f.toast.success("Free entry request created successfully"),s()}catch(e){f.toast.error("Failed to create entry"),console.error(e)}finally{c(!1)}}return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Create Free Entry Request"}),(0,r.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Add a new free entry request on behalf of a customer"})]}),(0,r.jsx)("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:(0,r.jsx)(b.Z,{size:20,className:"text-slate-500"})})]}),(0,r.jsxs)("form",{onSubmit:o,className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Customer Name ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",value:d.name,onChange:e=>i({...d,name:e.target.value}),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-slate-900",placeholder:"Enter customer's full name",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Email Address ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"email",value:d.email,onChange:e=>i({...d,email:e.target.value}),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-slate-900",placeholder:"customer@example.com",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Phone Number ",(0,r.jsx)("span",{className:"text-slate-400",children:"(Optional)"})]}),(0,r.jsx)("input",{type:"tel",value:d.phone,onChange:e=>i({...d,phone:e.target.value}),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-slate-900",placeholder:"1234567890"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Reason for Free Entry ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("textarea",{value:d.reason,onChange:e=>i({...d,reason:e.target.value}),rows:4,className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-slate-900 resize-none",placeholder:"E.g., Birthday celebration, school event, special occasion...",required:!0}),(0,r.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Provide a clear reason why this customer is requesting free entry"})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-slate-200",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors font-medium",disabled:n,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:n,children:n?"Creating...":"Create Entry"})]})]})]})})}function j(){let[e,t]=(0,a.useState)([]),[s,f]=(0,a.useState)(!0),[m,h]=(0,a.useState)(!1);async function b(){try{let e=await (0,l.nW)();t(e)}catch(e){console.error("Error loading entries:",e)}finally{f(!1)}}(0,a.useEffect)(()=>{b()},[]);let j={total:e.length,pending:e.filter(e=>"PENDING"===e.status).length,approved:e.filter(e=>"APPROVED"===e.status).length,rejected:e.filter(e=>"REJECTED"===e.status).length};return s?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Free Entry Submissions"}),(0,r.jsx)("p",{className:"text-slate-500 mt-1",children:"Manage free entry requests from customers"})]}),(0,r.jsxs)("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[(0,r.jsx)(n.Z,{size:20}),"Create New Entry"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"p-3 bg-blue-100 text-blue-600 rounded-lg",children:(0,r.jsx)(c.Z,{size:24})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-slate-500 font-medium",children:"Total Requests"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:j.total})]})]})}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"p-3 bg-yellow-100 text-yellow-600 rounded-lg",children:(0,r.jsx)(d.Z,{size:24})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-slate-500 font-medium",children:"Pending"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:j.pending})]})]})}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"p-3 bg-green-100 text-green-600 rounded-lg",children:(0,r.jsx)(i.Z,{size:24})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-slate-500 font-medium",children:"Approved"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:j.approved})]})]})}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"p-3 bg-red-100 text-red-600 rounded-lg",children:(0,r.jsx)(o.Z,{size:24})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-slate-500 font-medium",children:"Rejected"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:j.rejected})]})]})})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:(0,r.jsxs)("table",{className:"w-full text-left",children:[(0,r.jsx)("thead",{className:"bg-slate-50 border-b border-slate-200",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Applicant"}),(0,r.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Reason"}),(0,r.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-slate-100",children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-500",children:'No free entry requests yet. Click "Create New Entry" to add one.'})}):e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors",children:[(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold text-slate-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-slate-500 flex items-center gap-1",children:[(0,r.jsx)(c.Z,{size:14}),e.email]}),e.phone&&(0,r.jsxs)("p",{className:"text-sm text-slate-500 flex items-center gap-1",children:[(0,r.jsx)(x.Z,{size:14}),e.phone]})]})}),(0,r.jsxs)("td",{className:"px-6 py-4",children:[(0,r.jsx)("p",{className:"text-sm text-slate-700 max-w-md",children:e.reason}),e.notes&&(0,r.jsxs)("p",{className:"text-xs text-slate-500 mt-1 italic",children:["Note: ",e.notes]})]}),(0,r.jsxs)("td",{className:"px-6 py-4",children:["PENDING"===e.status&&(0,r.jsx)("span",{className:"px-2.5 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-bold",children:"Pending"}),"APPROVED"===e.status&&(0,r.jsx)("span",{className:"px-2.5 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Approved"}),"REJECTED"===e.status&&(0,r.jsx)("span",{className:"px-2.5 py-1 bg-red-100 text-red-700 rounded-full text-xs font-bold",children:"Rejected"})]}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm text-slate-600",children:(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(u.Z,{size:14,className:"text-slate-400"}),new Date(e.createdAt).toLocaleDateString()]})}),(0,r.jsx)("td",{className:"px-6 py-4 text-right",children:(0,r.jsx)(p,{entry:e})})]},e.id))})]})}),m&&(0,r.jsx)(y,{onClose:()=>h(!1),onSuccess:()=>{h(!1),b()}})]})}},73837:function(e,t,s){"use strict";s.d(t,{Ir:function(){return a},RE:function(){return c},WR:function(){return o},bB:function(){return i},d4:function(){return x},nM:function(){return u},nW:function(){return l},p6:function(){return n},sJ:function(){return d}}),s(54465);var r=s(77537),a=(0,r.$)("8f93d4ea26e94cfed24406202f385d9f3644fba5"),l=(0,r.$)("9e118518079fb652eba45841ea4e66bf63e5c697"),n=(0,r.$)("02d6fab51dbd50bd3293342a8d5f3cc943acdd39"),c=(0,r.$)("a0d3eac11c41578876f9dbd5542fba2c92ee00cf"),d=(0,r.$)("0bc00b487c316200152b8ac33a7226c48168906c");(0,r.$)("91591829f0311711e3220ca928484499746e1363"),(0,r.$)("6356454e50b3e972c6f656b4790bbc8763619343"),(0,r.$)("02726a00e982294164d4b0e671cb6ce1a2ab1c0c"),(0,r.$)("3db34f51af62f73c30be94afe24bfa05bfe25838");var i=(0,r.$)("b1cda140af209d606f0d658c232687b6e92f09a8");(0,r.$)("9bbef1f8bd96fcdb689a7d4545533165745533c6"),(0,r.$)("437881e7a534c83dcb052236abae8eb7193f6d94");var o=(0,r.$)("e971cdd25661fba85c171aeebb16bda686ed4025"),x=(0,r.$)("8655477b64d873f635eda0e7c8c2786658aa081a");(0,r.$)("06d7f6579e4629e979e7da8468cbc7ed6631cb60"),(0,r.$)("93177680a354a6263d141877c5f3f213a8d0fa3f"),(0,r.$)("3291185d01b80c6e53a9c87e3091a55a242cc0b4");var u=(0,r.$)("5545ec07563819dda69b21cbed4451fd9078f1c9")},72690:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(30208),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let s=(0,r.forwardRef)((s,n)=>{let{color:c="currentColor",size:d=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:x="",children:u,...f}=s;return(0,r.createElement)("svg",{ref:n,...a,width:d,height:d,stroke:c,strokeWidth:o?24*Number(i)/Number(d):i,className:["lucide","lucide-".concat(l(e)),x].join(" "),...f},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(u)?u:[u]])});return s.displayName="".concat(e),s}},40488:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(72690).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},58518:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(72690).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},979:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(72690).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},41262:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(72690).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},59829:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(72690).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},90615:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(72690).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},26427:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(72690).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},36997:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(72690).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},45747:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(72690).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},46665:function(e,t,s){"use strict";var r=s(70319);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},77537:function(e,t,s){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return a}});let r=s(54465);function a(e){let{createServerReference:t}=s(92981);return t(e,r.callServer)}}},function(e){e.O(0,[6176,7115,9069,1744],function(){return e(e.s=8789)}),_N_E=e.O()}]);