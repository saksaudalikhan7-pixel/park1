"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9560],{49560:function(o,e,t){t.d(e,{fetchAllBookingsClient:function(){return c},fetchBookingsClient:function(){return l}});let n="http://localhost:8000/api/v1";async function l(){let o,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SESSION",t=function(){if("undefined"==typeof document)return null;let o=document.cookie.split(";");console.log("[AUTH] All cookies:",document.cookie);let e=["admin_token","token","auth_token","access_token"];for(let t of o){let[o,n]=t.trim().split("=");if(console.log("[AUTH] Checking cookie:",o),e.includes(o)){let e=decodeURIComponent(n);return console.log("[AUTH] Found token with name:",o),e}}return console.warn("[AUTH] No authentication token found in cookies"),null}();if(console.log("[CLIENT] Token exists:",!!t),console.log("[CLIENT] Fetching type:",e),"PARTY"===e)o="".concat(n,"/bookings/party-bookings/");else{let t=new URLSearchParams;t.append("type",e),t.append("ordering","-created_at"),o="".concat(n,"/bookings/bookings/?").concat(t.toString())}console.log("[CLIENT] Fetching:",o);let l={"Content-Type":"application/json"};t&&(l.Authorization="Bearer ".concat(t));try{let e=await fetch(o,{headers:l,credentials:"include",cache:"no-store"});if(console.log("[CLIENT] Response status:",e.status),console.log("[CLIENT] Response ok:",e.ok),!e.ok){let o=await e.text();throw console.error("[CLIENT] Error response:",o),Error("API returned ".concat(e.status,": ").concat(o))}let t=await e.json();return console.log("[CLIENT] Data received:",t),console.log("[CLIENT] Data length:",Array.isArray(t)?t.length:"not an array"),Array.isArray(t)?t:[]}catch(o){throw console.error("[CLIENT] Fetch error:",o),o}}async function c(){try{let[o,e]=await Promise.all([l("SESSION"),l("PARTY")]);console.log("[CLIENT] Session bookings:",o.length),console.log("[CLIENT] Party bookings:",e.length);let t=[...o,...e].sort((o,e)=>new Date(e.created_at).getTime()-new Date(o.created_at).getTime());return console.log("[CLIENT] All bookings:",t.length,"total"),t}catch(o){throw console.error("[CLIENT] Error fetching all bookings:",o),o}}}}]);