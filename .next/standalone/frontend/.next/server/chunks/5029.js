exports.id=5029,exports.ids=[5029],exports.modules={10853:(e,a,t)=>{let d={"25e8c8a61a9353863cf40a090ceb5f00692fc1a0":()=>Promise.resolve().then(t.bind(t,88437)).then(e=>e.markAllAsRead),"3c1d7275620e15e401cb797bfd91bddf6a7fa8ec":()=>Promise.resolve().then(t.bind(t,88437)).then(e=>e.getUnreadCount),"4b8a1f5b022fcc68cce8c3f8eec3ff8e9415b47b":()=>Promise.resolve().then(t.bind(t,88437)).then(e=>e.getUnreadNotifications),"85c2a0f83f54dd422e82eea5939d5a9c7782fff0":()=>Promise.resolve().then(t.bind(t,88437)).then(e=>e.markAsRead),cfbda83e87c5e4a47b3822d9ff670c9cccf1ebf4:()=>Promise.resolve().then(t.bind(t,88437)).then(e=>e.getNotifications),"022d8cab0ebd51fd7c8a2bab806d3d4081ce9d79":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.restorePartyBooking),"1fd1315d0d4a637cca24d5b73b78ca7b795fce82":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.updateCustomerDetails),"22a10893c5718c944fe761dd831251f93e6775b9":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.getBookings),"2788aa0878a99d77f68402e20b59c6532ded18d2":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.resendPartyBookingEmail),"2c1b655d510f2e8986beb1470bcf39e720b610dc":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.deletePartyBooking),"345a0d40e1b94dbe0fc6f20521428d743ae8e74b":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.getCustomerById),"37874dfd2fc4b6f0ee28c02a735d876d4ab315a3":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.getBookingById),"49bd40b69d563dfe5ff617908e276df71ebdbc54":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.getCustomers),"53044355be2ec2dc177c7e7b8b16323e311f0326":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.updatePartyBookingStatus),"5391122b95e0d787d35c0b389b61ae3052c8ce42":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.createBookingBlock),"5d158ae087a84dea77f3a7115cc49824ff3c841b":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.getWaiverById),"6121403de3ce7671509162f28a52f7b4eaeff528":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.getDashboardStats),"71442caae190626eedb233beee8e6e8c9c396109":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.getWaivers),"72bf0c3115ace700fdbe92609e40ef727f6e2e9a":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.updateBooking),"781eabc081078ba07c5dca2961dfd5174f61ad5c":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.loginAdmin),"7d8a09a290318f0dfb4c32d4ead6e3b2326b11ce":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.updatePartyBooking),"8d547064179501ce1ea4649e478fbf49e6473b19":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.deleteBooking),"91669db3d44938b80c2051708c62dd895de08312":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.deleteBookingBlock),"92eec72f6cda029d68ffc5f7747cf878f62592f6":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.toggleBookingArrival),"93d6bd79e2305e9fa4e391db0cd1ffb488369a1d":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.updateBookingStatus),"95a1b74108874a48ee8788e023fb227f64dbda91":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.updateWaiverMinors),"9cf94cfdb457087ba9f825e010e297fa11b3c2c8":()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.getBookingBlocks),b065149b1f592078e3633999bfc44b4507d24cd2:()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.restoreSessionBooking),b8bf2dc29fa3626f10e6027121c5728fbfc0abd6:()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.getPartyBookings),bbfa2f626c0ce2d9495a71bb6fbdd62c712f6d1d:()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.getSessionBookingHistory),c00f3eee56aa6d980d28786a353ddb302062907e:()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.toggleWaiverVerification),c80f1a1c040ba7c09b4c27c71fb39116e2823b2a:()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.getSessionBookings),c85fddc17f48c7e5e41cfa5391d110e4e65cbe50:()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.getPartyBookingById),d0fb7859064b83124c23362f1eaba7c07d92a01a:()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.getPartyBookingHistory),d5f1ecc7b99ddd36607b07794a41de699d232d70:()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.verifyWaiver),d92b4b48651b0207f49bc42ae575077cdec3e411:()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.getAllBookings),e426f40152b2e033cca9effa52511ce12b949d52:()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.updateBookingDetails),e46e056505ba9c21e65755fe78e4d9e136f86362:()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.logoutAdmin),e57dc804520282bb2373ffdcde17e74d9b9c1c84:()=>Promise.resolve().then(t.bind(t,96655)).then(e=>e.updateBookingBlock),de109ecab7d74aebee11f5c66014c863e8f1b41c:()=>Promise.resolve().then(t.bind(t,23954)).then(e=>e.createBooking)};async function n(e,...a){return(await d[e]()).apply(null,a)}e.exports={"25e8c8a61a9353863cf40a090ceb5f00692fc1a0":n.bind(null,"25e8c8a61a9353863cf40a090ceb5f00692fc1a0"),"3c1d7275620e15e401cb797bfd91bddf6a7fa8ec":n.bind(null,"3c1d7275620e15e401cb797bfd91bddf6a7fa8ec"),"4b8a1f5b022fcc68cce8c3f8eec3ff8e9415b47b":n.bind(null,"4b8a1f5b022fcc68cce8c3f8eec3ff8e9415b47b"),"85c2a0f83f54dd422e82eea5939d5a9c7782fff0":n.bind(null,"85c2a0f83f54dd422e82eea5939d5a9c7782fff0"),cfbda83e87c5e4a47b3822d9ff670c9cccf1ebf4:n.bind(null,"cfbda83e87c5e4a47b3822d9ff670c9cccf1ebf4"),"022d8cab0ebd51fd7c8a2bab806d3d4081ce9d79":n.bind(null,"022d8cab0ebd51fd7c8a2bab806d3d4081ce9d79"),"1fd1315d0d4a637cca24d5b73b78ca7b795fce82":n.bind(null,"1fd1315d0d4a637cca24d5b73b78ca7b795fce82"),"22a10893c5718c944fe761dd831251f93e6775b9":n.bind(null,"22a10893c5718c944fe761dd831251f93e6775b9"),"2788aa0878a99d77f68402e20b59c6532ded18d2":n.bind(null,"2788aa0878a99d77f68402e20b59c6532ded18d2"),"2c1b655d510f2e8986beb1470bcf39e720b610dc":n.bind(null,"2c1b655d510f2e8986beb1470bcf39e720b610dc"),"345a0d40e1b94dbe0fc6f20521428d743ae8e74b":n.bind(null,"345a0d40e1b94dbe0fc6f20521428d743ae8e74b"),"37874dfd2fc4b6f0ee28c02a735d876d4ab315a3":n.bind(null,"37874dfd2fc4b6f0ee28c02a735d876d4ab315a3"),"49bd40b69d563dfe5ff617908e276df71ebdbc54":n.bind(null,"49bd40b69d563dfe5ff617908e276df71ebdbc54"),"53044355be2ec2dc177c7e7b8b16323e311f0326":n.bind(null,"53044355be2ec2dc177c7e7b8b16323e311f0326"),"5391122b95e0d787d35c0b389b61ae3052c8ce42":n.bind(null,"5391122b95e0d787d35c0b389b61ae3052c8ce42"),"5d158ae087a84dea77f3a7115cc49824ff3c841b":n.bind(null,"5d158ae087a84dea77f3a7115cc49824ff3c841b"),"6121403de3ce7671509162f28a52f7b4eaeff528":n.bind(null,"6121403de3ce7671509162f28a52f7b4eaeff528"),"71442caae190626eedb233beee8e6e8c9c396109":n.bind(null,"71442caae190626eedb233beee8e6e8c9c396109"),"72bf0c3115ace700fdbe92609e40ef727f6e2e9a":n.bind(null,"72bf0c3115ace700fdbe92609e40ef727f6e2e9a"),"781eabc081078ba07c5dca2961dfd5174f61ad5c":n.bind(null,"781eabc081078ba07c5dca2961dfd5174f61ad5c"),"7d8a09a290318f0dfb4c32d4ead6e3b2326b11ce":n.bind(null,"7d8a09a290318f0dfb4c32d4ead6e3b2326b11ce"),"8d547064179501ce1ea4649e478fbf49e6473b19":n.bind(null,"8d547064179501ce1ea4649e478fbf49e6473b19"),"91669db3d44938b80c2051708c62dd895de08312":n.bind(null,"91669db3d44938b80c2051708c62dd895de08312"),"92eec72f6cda029d68ffc5f7747cf878f62592f6":n.bind(null,"92eec72f6cda029d68ffc5f7747cf878f62592f6"),"93d6bd79e2305e9fa4e391db0cd1ffb488369a1d":n.bind(null,"93d6bd79e2305e9fa4e391db0cd1ffb488369a1d"),"95a1b74108874a48ee8788e023fb227f64dbda91":n.bind(null,"95a1b74108874a48ee8788e023fb227f64dbda91"),"9cf94cfdb457087ba9f825e010e297fa11b3c2c8":n.bind(null,"9cf94cfdb457087ba9f825e010e297fa11b3c2c8"),b065149b1f592078e3633999bfc44b4507d24cd2:n.bind(null,"b065149b1f592078e3633999bfc44b4507d24cd2"),b8bf2dc29fa3626f10e6027121c5728fbfc0abd6:n.bind(null,"b8bf2dc29fa3626f10e6027121c5728fbfc0abd6"),bbfa2f626c0ce2d9495a71bb6fbdd62c712f6d1d:n.bind(null,"bbfa2f626c0ce2d9495a71bb6fbdd62c712f6d1d"),c00f3eee56aa6d980d28786a353ddb302062907e:n.bind(null,"c00f3eee56aa6d980d28786a353ddb302062907e"),c80f1a1c040ba7c09b4c27c71fb39116e2823b2a:n.bind(null,"c80f1a1c040ba7c09b4c27c71fb39116e2823b2a"),c85fddc17f48c7e5e41cfa5391d110e4e65cbe50:n.bind(null,"c85fddc17f48c7e5e41cfa5391d110e4e65cbe50"),d0fb7859064b83124c23362f1eaba7c07d92a01a:n.bind(null,"d0fb7859064b83124c23362f1eaba7c07d92a01a"),d5f1ecc7b99ddd36607b07794a41de699d232d70:n.bind(null,"d5f1ecc7b99ddd36607b07794a41de699d232d70"),d92b4b48651b0207f49bc42ae575077cdec3e411:n.bind(null,"d92b4b48651b0207f49bc42ae575077cdec3e411"),e426f40152b2e033cca9effa52511ce12b949d52:n.bind(null,"e426f40152b2e033cca9effa52511ce12b949d52"),e46e056505ba9c21e65755fe78e4d9e136f86362:n.bind(null,"e46e056505ba9c21e65755fe78e4d9e136f86362"),e57dc804520282bb2373ffdcde17e74d9b9c1c84:n.bind(null,"e57dc804520282bb2373ffdcde17e74d9b9c1c84"),de109ecab7d74aebee11f5c66014c863e8f1b41c:n.bind(null,"de109ecab7d74aebee11f5c66014c863e8f1b41c")}},72189:(e,a,t)=>{"use strict";t.d(a,{T:()=>d}),t(28892);var d=(0,t(15537).$)("de109ecab7d74aebee11f5c66014c863e8f1b41c")},23954:(e,a,t)=>{"use strict";t.r(a),t.d(a,{createBooking:()=>s});var d=t(21354);t(27277);var n=t(35643),c=t(11383),r=t(22385),i=t.n(r),o=t(60663);let b="http://localhost:8000/api/v1";async function s(e){try{var a,t;let d=c.bookingSchema.safeParse(e);if(!d.success){console.error("Validation failed:",d.error.issues);let e=d.error.issues[0];return{success:!1,error:e.message||"Invalid form data. Please check your inputs."}}let r=d.data;if(a=r.email,!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(a))return{success:!1,error:"Invalid email format"};if(t=r.phone,!/^[6-9]\d{9}$/.test(t))return{success:!1,error:"Invalid phone number format"};let o=r.name.replace(/[<>]/g,"").replace(/[^\w\s.@'-]/g,"").trim(),s=r.email.toLowerCase().trim(),f=(0,c.formatPhoneNumber)(r.phone),l=new Date(r.date),u=new Date;if(u.setHours(0,0,0,0),l<u)return{success:!1,error:"Cannot book for past dates"};if(l.toDateString()===u.toDateString()){let[e,a]=r.time.split(":").map(Number),t=new Date;if(t.setHours(e,a||0,0,0),t<new Date)return{success:!1,error:"Selected time has passed. Please choose a future time slot."}}let m=500*r.kids+899*r.adults+150*r.spectators;"120"===r.duration&&(m+=(r.kids+r.adults)*500);let h=.18*m,g=m+h,v=0,p=null;if(r.voucherCode){let e=await fetch(`${b}/shop/vouchers/?code=${r.voucherCode}`,{cache:"no-store"});if(!e.ok)return{success:!1,error:"Invalid voucher code"};let a=(await e.json())[0];if(!a)return{success:!1,error:"Invalid voucher code"};if(!a.is_active)return{success:!1,error:"This voucher is inactive"};if(a.expiry_date&&new Date(a.expiry_date)<new Date)return{success:!1,error:"This voucher has expired"};if(a.usage_limit&&a.used_count>=a.usage_limit)return{success:!1,error:"This voucher has reached its usage limit"};if(a.min_order_amount&&m<parseFloat(a.min_order_amount))return{success:!1,error:`Minimum order of â‚¹${parseFloat(a.min_order_amount).toLocaleString()} required to use this voucher`};v="PERCENTAGE"===a.discount_type?m*parseFloat(a.discount_value)/100:parseFloat(a.discount_value),v=Math.min(v,g),v=Number(v.toFixed(2)),g-=v,p=a.id,await fetch(`${b}/shop/vouchers/${a.id}/`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({used_count:a.used_count+1})})}let P=function(){let e=new Date,a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),d=String(e.getDate()).padStart(2,"0"),n=Math.floor(1e4*Math.random()).toString().padStart(4,"0");return`NIP-${a}${t}${d}-${n}`}(),k=new Date(Date.now()-3e5),y=await fetch(`${b}/bookings/bookings/?email=${encodeURIComponent(s)}&date=${r.date}&time=${r.time}`,{cache:"no-store"});if(y.ok&&(await y.json()).find(e=>new Date(e.created_at)>=k))return{success:!1,error:"A booking with these details was recently created. Please check your email or contact support."};let w={name:o,email:s,phone:f,date:r.date,time:r.time,duration:parseInt(r.duration),adults:r.adults,kids:r.kids,spectators:r.spectators,subtotal:Number(m.toFixed(2)),amount:Number(g.toFixed(2)),discount_amount:Number(v.toFixed(2)),voucher_code:r.voucherCode||null,voucher:p,status:"CONFIRMED",booking_status:"CONFIRMED",payment_status:"PENDING",waiver_status:"PENDING",type:"SESSION"},B=await fetch(`${b}/bookings/bookings/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(!B.ok){let e=await B.json();return{success:!1,error:e.detail||"Failed to create booking"}}let A=await B.json(),S={name:o,email:s,phone:f,dob:r.dateOfBirth||null,version:"1.0",minors:r.minors||[],adults:r.adultGuests||[],booking:A.id};await fetch(`${b}/bookings/waivers/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)}),await fetch(`${b}/bookings/bookings/${A.id}/`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({waiver_status:"SIGNED"})});let N=JSON.stringify({id:A.uuid||A.id,name:A.name,date:A.date,time:A.time,guests:A.adults+A.kids+A.spectators}),z=await i().toDataURL(N,{errorCorrectionLevel:"H",type:"image/png",width:300,margin:2});return await fetch(`${b}/bookings/bookings/${A.id}/`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({qr_code:z})}),console.log("Booking created successfully:",{id:A.id,uuid:A.uuid,bookingNumber:P,email:s,date:r.date,time:r.time}),(0,n.revalidatePath)("/admin"),(0,n.revalidatePath)("/admin/bookings"),{success:!0,bookingId:A.uuid||A.id,bookingNumber:P}}catch(e){return console.error("Failed to create booking:",e),{success:!1,error:`Error: ${e instanceof Error?e.message:"Unknown error"}`}}}(0,o.ensureServerEntryExports)([s]),(0,d.createActionProxy)("de109ecab7d74aebee11f5c66014c863e8f1b41c",s)},88437:(e,a,t)=>{"use strict";t.r(a),t.d(a,{getNotifications:()=>r,getUnreadCount:()=>o,getUnreadNotifications:()=>i,markAllAsRead:()=>s,markAsRead:()=>b});var d=t(21354);t(27277);var n=t(99592),c=t(35643);async function r(){try{let e=await (0,n.fetchAPI)("/core/notifications/");if(!e||!e.ok)return[];return await e.json()}catch(e){return console.error("Error fetching notifications:",e),[]}}async function i(){try{let e=await (0,n.fetchAPI)("/core/notifications/unread/");if(!e||!e.ok)return[];return await e.json()}catch(e){return console.error("Error fetching unread notifications:",e),[]}}async function o(){try{let e=await (0,n.fetchAPI)("/core/notifications/unread_count/");if(!e||!e.ok)return 0;return(await e.json()).count||0}catch(e){return console.error("Error fetching unread count:",e),0}}async function b(e){try{let a=await (0,n.fetchAPI)(`/core/notifications/${e}/mark_read/`,{method:"POST"});if(a&&a.ok)return(0,c.revalidatePath)("/admin"),{success:!0};return{success:!1}}catch(e){return console.error("Error marking notification as read:",e),{success:!1}}}async function s(){try{let e=await (0,n.fetchAPI)("/core/notifications/mark_all_read/",{method:"POST"});if(e&&e.ok)return(0,c.revalidatePath)("/admin"),{success:!0};return{success:!1}}catch(e){return console.error("Error marking all notifications as read:",e),{success:!1}}}(0,t(60663).ensureServerEntryExports)([r,i,o,b,s]),(0,d.createActionProxy)("cfbda83e87c5e4a47b3822d9ff670c9cccf1ebf4",r),(0,d.createActionProxy)("4b8a1f5b022fcc68cce8c3f8eec3ff8e9415b47b",i),(0,d.createActionProxy)("3c1d7275620e15e401cb797bfd91bddf6a7fa8ec",o),(0,d.createActionProxy)("85c2a0f83f54dd422e82eea5939d5a9c7782fff0",b),(0,d.createActionProxy)("25e8c8a61a9353863cf40a090ceb5f00692fc1a0",s)},70980:(e,a,t)=>{"use strict";t.d(a,{addHours:()=>d.addHours,isBefore:()=>n.isBefore});var d=t(33266),n=t(76221)},78158:(e,a,t)=>{"use strict";t.d(a,{bookingSchema:()=>c,formatPhoneNumber:()=>r});var d=t(26126),n=t(70980);let c=d.z.object({date:d.z.string().min(1,"Please select a date").refine(e=>{try{let a=new Date(e),t=(0,n.addHours)(new Date,2160);return(0,n.isBefore)(a,t)}catch{return!1}},"Bookings can only be made up to 90 days in advance"),time:d.z.string().min(1,"Please select a time slot"),duration:d.z.enum(["60","120"]),adults:d.z.number().min(0,"Cannot be negative").max(50,"Maximum 50 adults per booking"),kids:d.z.number().min(0,"Cannot be negative").max(50,"Maximum 50 kids per booking"),spectators:d.z.number().min(0,"Cannot be negative").max(50,"Maximum 50 spectators per booking"),name:d.z.string().min(3,"Name must be at least 3 characters").max(100,"Name is too long").regex(/^[a-zA-Z\s.'-]+$/,"Name can only contain letters, spaces, dots, hyphens and apostrophes").transform(e=>e.trim()),email:d.z.string().min(1,"Email is required").email("Please enter a valid email address").regex(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,"Please enter a valid email address").toLowerCase().transform(e=>e.trim()),phone:d.z.string().min(1,"Phone number is required").regex(/^(\+91|91)?[6-9]\d{9}$/,"Please enter a valid 10-digit Indian mobile number").transform(e=>r(e)),dateOfBirth:d.z.string().min(1,"Date of birth is required"),dateOfArrival:d.z.string().min(1,"Date of arrival is required"),minors:d.z.array(d.z.object({name:d.z.string().min(1,"Minor name is required"),dob:d.z.string().min(1,"Minor DOB is required")})).optional(),adultGuests:d.z.array(d.z.object({name:d.z.string().min(1,"Adult name is required"),email:d.z.string().email("Valid email required"),phone:d.z.string().min(10,"Valid phone required"),dob:d.z.string().min(1,"Adult DOB is required")})).optional(),voucherCode:d.z.string().optional(),discountAmount:d.z.number().optional(),waiverAccepted:d.z.boolean().refine(e=>!0===e,"You must accept the waiver to proceed")}).refine(e=>e.adults>0||e.kids>0,{message:"At least one jumper (adult or kid) is required for booking",path:["adults"]}).refine(e=>e.adults+e.kids+e.spectators<=100,{message:"Total guests cannot exceed 100 per booking",path:["spectators"]});function r(e){let a=e.replace(/\D/g,"");return a.startsWith("91")&&12===a.length?a.substring(2):(a.length,a)}},11383:(e,a,t)=>{"use strict";var d=t(78158);t.o(d,"bookingSchema")&&t.d(a,{bookingSchema:function(){return d.bookingSchema}}),t.o(d,"formatPhoneNumber")&&t.d(a,{formatPhoneNumber:function(){return d.formatPhoneNumber}})}};