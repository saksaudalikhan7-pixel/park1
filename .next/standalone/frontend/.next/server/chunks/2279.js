"use strict";exports.id=2279,exports.ids=[2279],exports.modules={20023:(e,a,t)=>{t.d(a,{Q:()=>x});var l=t(54714),s=t(77580);function r({field:e,value:a,onChange:t,error:s}){return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"text-sm font-medium text-slate-700",children:[e.label,e.required&&l.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),"textarea"===e.type?l.jsx("textarea",{name:e.name,value:a||"",onChange:e=>t(e.target.value),placeholder:e.placeholder,rows:4,disabled:e.readOnly,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all ${s?"border-red-500":"border-slate-200"} ${e.readOnly?"bg-slate-100 text-slate-500 cursor-not-allowed":""}`}):l.jsx("input",{type:"number"===e.type?"number":"text",name:e.name,value:a||"",onChange:e=>t(e.target.value),placeholder:e.placeholder,readOnly:e.readOnly,disabled:e.readOnly,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all ${s?"border-red-500":"border-slate-200"} ${e.readOnly?"bg-slate-100 text-slate-500 cursor-not-allowed":""}`}),e.helpText&&l.jsx("p",{className:"text-xs text-slate-500",children:e.helpText}),s&&l.jsx("p",{className:"text-xs text-red-500",children:s})]})}function o({field:e,value:a,onChange:t}){return(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700",children:e.label}),e.helpText&&l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:e.helpText})]}),l.jsx("button",{type:"button",onClick:()=>!e.readOnly&&t(!a),disabled:e.readOnly,className:`relative w-12 h-6 rounded-full transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary/20 ${a?"bg-emerald-500":"bg-slate-300"} ${e.readOnly?"opacity-50 cursor-not-allowed":""}`,children:l.jsx("span",{className:`absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 ease-in-out ${a?"translate-x-6":"translate-x-0"}`})})]})}function n({field:e,value:a,onChange:t,error:s}){return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"text-sm font-medium text-slate-700",children:[e.label,e.required&&l.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,l.jsxs)("select",{value:a||"",onChange:e=>t(e.target.value),className:`w-full px-4 py-2 border rounded-lg bg-white focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all ${s?"border-red-500":"border-slate-200"}`,children:[l.jsx("option",{value:"",children:"Select an option"}),e.options?.map(e=>l.jsx("option",{value:e.value,children:e.label},e.value))]}),e.helpText&&l.jsx("p",{className:"text-xs text-slate-500",children:e.helpText}),s&&l.jsx("p",{className:"text-xs text-red-500",children:s})]})}var i=t(24903),d=t(17694),c=t(20155);function u({field:e,value:a=[],onChange:t,error:r}){let[o,n]=(0,s.useState)(""),i=()=>{o.trim()&&(t([...a,o.trim()]),n(""))},u=e=>{let l=[...a];l.splice(e,1),t(l)};return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"text-sm font-medium text-slate-700",children:[e.label,e.required&&l.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[a.map((e,a)=>(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"flex-1 px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:"string"==typeof e?e:JSON.stringify(e)}),l.jsx("button",{type:"button",onClick:()=>u(a),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:l.jsx(d.Z,{className:"w-4 h-4"})})]},a)),(0,l.jsxs)("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:o,onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),i())},placeholder:"Add new item...",className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none"}),(0,l.jsxs)("button",{type:"button",onClick:i,disabled:!o.trim(),className:"px-4 py-2 bg-slate-900 text-white rounded-lg text-sm font-medium hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[l.jsx(c.Z,{className:"w-4 h-4"}),"Add"]})]})]}),e.helpText&&l.jsx("p",{className:"text-xs text-slate-500",children:e.helpText}),r&&l.jsx("p",{className:"text-xs text-red-500",children:r})]})}function x({field:e,value:a,onChange:t,error:s,label:d,children:c}){if(c)return(0,l.jsxs)("div",{className:"space-y-1",children:[d&&(0,l.jsxs)("label",{className:"block text-sm font-medium text-slate-700",children:[d,e?.required&&l.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),c,s&&l.jsx("p",{className:"text-sm text-red-500",children:s})]});if(!e)return null;switch(e.type){case"text":case"textarea":case"number":case"url":default:return l.jsx(r,{field:e,value:a,onChange:t,error:s});case"boolean":return l.jsx(o,{field:e,value:a,onChange:t});case"select":return l.jsx(n,{field:e,value:a,onChange:t,error:s});case"image":return l.jsx(i.C,{field:e,value:a,onChange:t,error:s});case"json_list":return l.jsx(u,{field:e,value:a,onChange:t,error:s})}}},24903:(e,a,t)=>{t.d(a,{C:()=>x});var l=t(54714),s=t(77580),r=t(57801),o=t(17694),n=t(46861),i=t(16789),d=t(95799),c=t(85491),u=t(51500);function x({field:e,value:a,onChange:x,error:p}){let m=(0,r.useRouter)(),[h,g]=(0,s.useState)(!1),[f,b]=(0,s.useState)(0),y=["image/jpeg","image/jpg","image/png","image/webp"],j=e=>e.size>5242880?`File size must be less than 5MB. Current size: ${(e.size/1024/1024).toFixed(2)}MB`:y.includes(e.type)?null:`Invalid file type. Allowed: JPG, PNG, WEBP. Got: ${e.type}`,v=async e=>{let a=e.target.files?.[0];if(!a)return;let l=j(a);if(l){c.toast.error(l),e.target.value="";return}g(!0),b(0);let s=setInterval(()=>{b(e=>e>=90?e:Math.min(e+15,90))},150);try{let l=new FormData;l.append("file",a),console.log("[ImageUploadField] Starting upload:",a.name);let{uploadImage:r}=await t.e(1244).then(t.bind(t,91244)),o=await r(l);clearInterval(s),b(100),o.success&&o.url?(console.log("[ImageUploadField] Upload successful:",o.url),x(o.url),c.toast.success("Image uploaded successfully!"),m.refresh(),e.target.value=""):(console.error("[ImageUploadField] Upload failed:",o.error),c.toast.error(o.error||"Upload failed"))}catch(e){clearInterval(s),console.error("[ImageUploadField] Upload exception:",e),c.toast.error(e.message||"Upload failed. Please try again.")}finally{g(!1),b(0)}};return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"text-sm font-medium text-slate-700",children:[e.label,e.required&&l.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,l.jsxs)("div",{className:"flex items-start gap-4",children:[a?(0,l.jsxs)("div",{className:"relative w-32 h-32 bg-slate-100 rounded-lg overflow-hidden border border-slate-200 group",children:[l.jsx("img",{src:(0,u.j)(a),alt:"Preview",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23f1f5f9" width="100" height="100"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%2394a3b8" font-size="12"%3EImage Error%3C/text%3E%3C/svg%3E'}}),l.jsx("button",{type:"button",onClick:()=>x(""),className:"absolute top-1 right-1 p-1 bg-white/80 rounded-full hover:bg-red-50 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100",title:"Remove image",children:l.jsx(o.Z,{className:"w-4 h-4"})})]}):(0,l.jsxs)("div",{className:"w-32 h-32 bg-slate-50 rounded-lg border-2 border-dashed border-slate-200 flex flex-col items-center justify-center text-slate-400",children:[l.jsx(n.Z,{className:"w-8 h-8 mb-2"}),l.jsx("span",{className:"text-xs",children:"No image"})]}),(0,l.jsxs)("div",{className:"flex-1 space-y-3",children:[l.jsx("div",{className:"flex gap-2",children:l.jsx("input",{type:"text",value:a||"",onChange:e=>x(e.target.value),placeholder:"Enter image URL directly...",className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none text-slate-900"})}),(0,l.jsxs)("div",{className:"relative",children:[l.jsx("input",{type:"file",accept:"image/*",onChange:v,disabled:h,className:"hidden",id:`file-upload-${e.name}`}),(0,l.jsxs)("label",{htmlFor:`file-upload-${e.name}`,className:`w-full px-4 py-3 bg-slate-900 text-white rounded-lg text-sm font-bold hover:bg-slate-800 transition-all flex items-center justify-center gap-2 shadow-sm active:scale-[0.98] ${h?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[l.jsx(i.Z,{className:"w-4 h-4"}),h?`Uploading... ${f}%`:"Upload Image"]}),h&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-slate-100 rounded-b-lg overflow-hidden",children:l.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${f}%`}})})]}),l.jsx("p",{className:"text-xs text-slate-500",children:"Supported: JPG, PNG, WEBP â€¢ Max size: 5MB"})]})]}),p&&(0,l.jsxs)("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[l.jsx(d.Z,{className:"w-3 h-3"}),p]})]})}},21124:(e,a,t)=>{t.d(a,{Z:()=>l});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t(59858).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},16789:(e,a,t)=>{t.d(a,{Z:()=>l});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t(59858).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},70023:(e,a,t)=>{t.r(a),t.d(a,{uploadImage:()=>r});var l=t(21354);t(27277);var s=t(84357);async function r(e){try{let a=s.cookies().get("admin_token")?.value;if(!a)return console.error("[Upload] No admin token found"),{success:!1,error:"Not authenticated. Please login again."};let t=e.get("file");if(!t)return console.error("[Upload] No file in FormData"),{success:!1,error:"No file provided"};console.log("[Upload] Processing file:",t.name,"Size:",t.size,"Type:",t.type);let l=await t.arrayBuffer(),r=Buffer.from(l),o=new FormData,n=new Blob([r],{type:t.type});o.append("file",n,t.name),console.log("[Upload] Sending to Django backend...");let i=await fetch("http://localhost:8000/api/v1/cms/upload/",{method:"POST",headers:{Authorization:`Bearer ${a}`},body:o});if(console.log("[Upload] Django response status:",i.status),!i.ok){let e=await i.text();console.error("[Upload] Django error:",e);let a="Upload failed";try{a=JSON.parse(e).error||a}catch{a=e||a}return{success:!1,error:a}}let d=await i.json();return console.log("[Upload] Success! URL:",d.url),{success:!0,url:d.url}}catch(e){return console.error("[Upload] Exception:",e),{success:!1,error:e.message||"Upload failed. Please try again."}}}(0,t(60663).ensureServerEntryExports)([r]),(0,l.createActionProxy)("3d8e1ef66ce1c7729995a281932b86b3a659d6af",r)}};