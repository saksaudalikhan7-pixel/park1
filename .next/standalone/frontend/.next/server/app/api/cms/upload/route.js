"use strict";(()=>{var e={};e.id=7830,e.ids=[7830],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},22286:(e,t,o)=>{o.r(t),o.d(t,{headerHooks:()=>g,originalPathname:()=>y,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>m});var r={};o.r(r),o.d(r,{POST:()=>u});var a=o(6170),n=o(8533),s=o(54387),i=o(40064),l=o(77157);async function u(e){console.log("[Upload Route] Request received");let t=l.cookies().get("admin_token")?.value;if(!t)return console.log("[Upload Route] No token found"),i.Z.json({error:"Unauthorized: No active session"},{status:401});console.log("[Upload Route] Token found, processing upload");try{console.log("[Upload Route] Parsing FormData...");let o=await e.formData(),r=o.get("file");if(console.log("[Upload Route] File received:",r?"yes":"no"),!r)return console.error("[Upload Route] No file in FormData"),i.Z.json({error:"No file provided"},{status:400});console.log("[Upload Route] Forwarding to backend...");let a=new AbortController,n=setTimeout(()=>a.abort(),3e4);try{let e=await fetch("http://localhost:8000/api/v1/cms/upload/",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:o,signal:a.signal});if(clearTimeout(n),console.log("[Upload Route] Backend response status:",e.status),!e.ok){let t=await e.text();return console.error("[Upload Route] Upload failed:",e.status,t),i.Z.json({error:`Upload failed: ${e.statusText}`},{status:e.status})}let r=await e.json();return console.log("[Upload Route] Upload successful, URL:",r.url),i.Z.json(r)}catch(e){if(clearTimeout(n),"AbortError"===e.name)return console.error("[Upload Route] Upload timeout after 30 seconds"),i.Z.json({error:"Upload timeout - please try again"},{status:408});throw console.error("[Upload Route] Fetch error:",e),e}}catch(e){return console.error("[Upload Route] Upload proxy error:",e),i.Z.json({error:`Internal server error: ${e.message}`},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/cms/upload/route",pathname:"/api/cms/upload",filename:"route",bundlePath:"app/api/cms/upload/route"},resolvedPagePath:"C:\\Users\\saksa\\OneDrive\\Desktop\\yoyopark\\ninjainflatablepark11\\park1\\frontend\\app\\api\\cms\\upload\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:f,headerHooks:g,staticGenerationBailout:m}=c,y="/api/cms/upload/route";function v(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:p})}},50374:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var o in t)Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}(t,{DynamicServerError:function(){return r},isDynamicServerError:function(){return a}});let o="DYNAMIC_SERVER_USAGE";class r extends Error{constructor(e){super("Dynamic server usage: "+e),this.description=e,this.digest=o}}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===o}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},85461:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var o in t)Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}(t,{isStaticGenBailoutError:function(){return i},staticGenerationBailout:function(){return u}});let r=o(50374),a=o(45869),n="NEXT_STATIC_GEN_BAILOUT";class s extends Error{constructor(...e){super(...e),this.code=n}}function i(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===n}function l(e,t){let{dynamic:o,link:r}=t||{};return"Page"+(o?' with `dynamic = "'+o+'"`':"")+" couldn't be rendered statically because it used `"+e+"`."+(r?" See more info here: "+r:"")}let u=(e,t)=>{let{dynamic:o,link:n}=void 0===t?{}:t,i=a.staticGenerationAsyncStorage.getStore();if(!i)return!1;if(i.forceStatic)return!0;if(i.dynamicShouldError)throw new s(l(e,{link:n,dynamic:null!=o?o:"error"}));let u=l(e,{dynamic:o,link:"https://nextjs.org/docs/messages/dynamic-server-error"});if(null==i.postpone||i.postpone.call(i,e),i.revalidate=0,i.isStaticGeneration){let t=new r.DynamicServerError(u);throw i.dynamicUsageDescription=e,i.dynamicUsageStack=t.stack,t}return!1};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};var t=require("../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[3499,7157,7386],()=>o(22286));module.exports=r})();